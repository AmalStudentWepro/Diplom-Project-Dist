import{g as L,a as b,s as g}from"./index-DVUMKYbu.js";const C=L("accessToken");C&&(window.location.href="/");const a=document.querySelector(".auth-form");a&&(a.onsubmit=async k=>{var f,d,p,h,v;k.preventDefault();const e=a.querySelectorAll("input"),n=e[0].value.trim(),w=e[1].value.trim(),E=e[2].value.trim(),s=e[3].value.trim(),c=e[4].value.trim(),u=e[5].value.trim(),i=e[6],l=e[7];let o=!1;a.querySelectorAll(".input-error-message").forEach(r=>r.remove()),e.forEach(r=>r.classList.remove("input-error")),[i,l].forEach(r=>r.parentElement.classList.remove("input-error"));function t(r,y){r.classList.add("input-error");const m=document.createElement("div");m.className="input-error-message",m.textContent=y,r.parentElement.appendChild(m),o=!0}if(n||t(e[0],"Введите имя"),w||t(e[1],"Введите фамилию"),E||t(e[2],"Введите логин"),s||t(e[3],"Введите пароль"),c||t(e[4],"Повторите пароль"),u||t(e[5],"Введите email"),s&&c&&s!==c&&(t(e[3],"Пароли не совпадают"),t(e[4],"Пароли не совпадают")),i.checked||(i.parentElement.classList.add("input-error"),o=!0),l.checked||(l.parentElement.classList.add("input-error"),o=!0),o)return;const x={fullName:n,email:u,password:s};try{const r=await b.post("https://blog-n7ue.onrender.com/users",x);g("accessToken",r.data.accessToken,1),g("userName",n,1),window.location.href="/"}catch(r){console.error(r),(p=(d=(f=r.response)==null?void 0:f.data)==null?void 0:d.message)!=null&&p.includes("exists")?(alert("Такой пользователь уже есть."),window.location.href="/"):alert("Ошибка регистрации: "+(((v=(h=r.response)==null?void 0:h.data)==null?void 0:v.message)||r.message))}});
